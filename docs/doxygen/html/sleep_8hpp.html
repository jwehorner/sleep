<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Sleep: C:/Users/hornerj/Documents/repos/sleep/include/sleep.hpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Sleep
   </div>
   <div id="projectbrief">C++ Cross Platform High Resolution Sleep Implementation.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">sleep.hpp File Reference</div></div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="sleep_8hpp.html" title="sleep.hpp defines a number of cross-platform utility functions for sleeping for millisecond and micro...">sleep.hpp</a> defines a number of cross-platform utility functions for sleeping for millisecond and microsecond durations.  
<a href="#details">More...</a></p>

<p><a href="sleep_8hpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="namespaces" name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespacesleep"><td class="memItemLeft" align="right" valign="top">namespace &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesleep.html">sleep</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad3898f7124caed6875fe4910a7e24bd9"><td class="memItemLeft" align="right" valign="top">const void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesleep.html#ad3898f7124caed6875fe4910a7e24bd9">sleep::sleep_ms</a> (const uint32_t ms)</td></tr>
<tr class="memdesc:ad3898f7124caed6875fe4910a7e24bd9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function sleep_ms sleeps for the specified number of milliseconds.  <br /></td></tr>
<tr class="separator:ad3898f7124caed6875fe4910a7e24bd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeca271646d642588e5ddd9a4750ac274"><td class="memItemLeft" align="right" valign="top">const void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesleep.html#aeca271646d642588e5ddd9a4750ac274">sleep::sleep_us</a> (const uint32_t us)</td></tr>
<tr class="memdesc:aeca271646d642588e5ddd9a4750ac274"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function sleep_us sleeps for the specified number of microseconds.  <br /></td></tr>
<tr class="separator:aeca271646d642588e5ddd9a4750ac274"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa32dd751b45c6d5919db6c0530d5f6e5"><td class="memItemLeft" align="right" valign="top">const uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesleep.html#aa32dd751b45c6d5919db6c0530d5f6e5">sleep::now_us</a> ()</td></tr>
<tr class="memdesc:aa32dd751b45c6d5919db6c0530d5f6e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function now_us gets the current system time in microseconds.  <br /></td></tr>
<tr class="separator:aa32dd751b45c6d5919db6c0530d5f6e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdb9a50679219f5afbf0a6e5715b4bb4"><td class="memItemLeft" align="right" valign="top">const uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesleep.html#afdb9a50679219f5afbf0a6e5715b4bb4">sleep::now_ns</a> ()</td></tr>
<tr class="memdesc:afdb9a50679219f5afbf0a6e5715b4bb4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function now_ns gets the current system time in nanoseconds.  <br /></td></tr>
<tr class="separator:afdb9a50679219f5afbf0a6e5715b4bb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5b0f0fe660ed76f6396306f50728332"><td class="memItemLeft" align="right" valign="top">const uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesleep.html#aa5b0f0fe660ed76f6396306f50728332">sleep::GetPerfFrequency</a> ()</td></tr>
<tr class="memdesc:aa5b0f0fe660ed76f6396306f50728332"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function GetPerfFrequency gets the frequency of the Windows performance counter.  <br /></td></tr>
<tr class="separator:aa5b0f0fe660ed76f6396306f50728332"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01b6801e0a794db209a737146d9985d9"><td class="memItemLeft" align="right" valign="top">const uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesleep.html#a01b6801e0a794db209a737146d9985d9">sleep::GetPerfCounter</a> ()</td></tr>
<tr class="memdesc:a01b6801e0a794db209a737146d9985d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function GetPerfCounter gets the current value of the Windows performance counter.  <br /></td></tr>
<tr class="separator:a01b6801e0a794db209a737146d9985d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9023d97d72aeede8f13bf30870c31ea"><td class="memItemLeft" align="right" valign="top">const void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesleep.html#af9023d97d72aeede8f13bf30870c31ea">sleep::initialise_windows_timers</a> ()</td></tr>
<tr class="memdesc:af9023d97d72aeede8f13bf30870c31ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function initialise_windows_timers initialises the static variables for using Windows timer objects for sleeping.  <br /></td></tr>
<tr class="separator:af9023d97d72aeede8f13bf30870c31ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83aa116beab9c570bcb4dbda202bff6c"><td class="memItemLeft" align="right" valign="top">const void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesleep.html#a83aa116beab9c570bcb4dbda202bff6c">sleep::sleep_ms_corrected</a> (const uint32_t ms, const int64_t error_us)</td></tr>
<tr class="memdesc:a83aa116beab9c570bcb4dbda202bff6c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function sleep_ms_corrected sleeps for the specified number of milliseconds minus the provided schedule slip, so that the mean sleep time converges onto the desired period.  <br /></td></tr>
<tr class="separator:a83aa116beab9c570bcb4dbda202bff6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a086056301a633afaa3bcac70361b5640"><td class="memItemLeft" align="right" valign="top">static const uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesleep.html#a086056301a633afaa3bcac70361b5640">sleep::min_sleep_time_us</a> = 10'000</td></tr>
<tr class="memdesc:a086056301a633afaa3bcac70361b5640"><td class="mdescLeft">&#160;</td><td class="mdescRight">Estimated minimum number of microseconds that a process can accurately sleep for using Windows timer objects.  <br /></td></tr>
<tr class="separator:a086056301a633afaa3bcac70361b5640"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8661c65654765ccc1a714bc9b2420d38"><td class="memItemLeft" align="right" valign="top">static const float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesleep.html#a8661c65654765ccc1a714bc9b2420d38">sleep::remaining_count_sleep_percent</a> = 0.75f</td></tr>
<tr class="memdesc:a8661c65654765ccc1a714bc9b2420d38"><td class="mdescLeft">&#160;</td><td class="mdescRight">Portion of the remaining count that should be slept for if the minimum sleep threshold is met.  <br /></td></tr>
<tr class="separator:a8661c65654765ccc1a714bc9b2420d38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9707261abb4ccf68449222e1d7ca719"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesleep.html#ae9707261abb4ccf68449222e1d7ca719">sleep::windows_timers_initialised</a> = false</td></tr>
<tr class="memdesc:ae9707261abb4ccf68449222e1d7ca719"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flag for if the Windows static variables have been initialised.  <br /></td></tr>
<tr class="separator:ae9707261abb4ccf68449222e1d7ca719"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e17179eaebe8fe799efede270704b93"><td class="memItemLeft" align="right" valign="top">static MMRESULT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesleep.html#a0e17179eaebe8fe799efede270704b93">sleep::begin_period_result</a></td></tr>
<tr class="memdesc:a0e17179eaebe8fe799efede270704b93"><td class="mdescLeft">&#160;</td><td class="mdescRight">Result of the timeBeginPeriod call to set the minimum Windows timer object resolution.  <br /></td></tr>
<tr class="separator:a0e17179eaebe8fe799efede270704b93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af21769e38ea2bf4af24eb70a5c725c13"><td class="memItemLeft" align="right" valign="top">static uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesleep.html#af21769e38ea2bf4af24eb70a5c725c13">sleep::cycles_per_s</a></td></tr>
<tr class="memdesc:af21769e38ea2bf4af24eb70a5c725c13"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of cycles per second of the Windows performance counter.  <br /></td></tr>
<tr class="separator:af21769e38ea2bf4af24eb70a5c725c13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4b7f029fc2ef33ca5e122feea1112ef"><td class="memItemLeft" align="right" valign="top">static uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesleep.html#aa4b7f029fc2ef33ca5e122feea1112ef">sleep::cycles_per_ms</a></td></tr>
<tr class="memdesc:aa4b7f029fc2ef33ca5e122feea1112ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of cycles per millisecond of the Windows performance counter.  <br /></td></tr>
<tr class="separator:aa4b7f029fc2ef33ca5e122feea1112ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab15b942d319010ce66a43cb1dae5c537"><td class="memItemLeft" align="right" valign="top">static uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesleep.html#ab15b942d319010ce66a43cb1dae5c537">sleep::cycles_per_us</a></td></tr>
<tr class="memdesc:ab15b942d319010ce66a43cb1dae5c537"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of cycles per microsecond of the Windows performance counter.  <br /></td></tr>
<tr class="separator:ab15b942d319010ce66a43cb1dae5c537"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bfcaaabab31a7fc81625c36ca8a3ba3"><td class="memItemLeft" align="right" valign="top">static uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesleep.html#a0bfcaaabab31a7fc81625c36ca8a3ba3">sleep::min_sleep_time_cycles</a></td></tr>
<tr class="memdesc:a0bfcaaabab31a7fc81625c36ca8a3ba3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of cycles of the Windows performance counter that a Windows timer objects can reliably sleep for.  <br /></td></tr>
<tr class="separator:a0bfcaaabab31a7fc81625c36ca8a3ba3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="sleep_8hpp.html" title="sleep.hpp defines a number of cross-platform utility functions for sleeping for millisecond and micro...">sleep.hpp</a> defines a number of cross-platform utility functions for sleeping for millisecond and microsecond durations. </p>
<p>The file provides cross platform implementations for sleeping for millisecond and microsecond durations, as well as querying the current time in microseconds. On Windows platforms the sleep functions have been optimized to provide maximum resolution in sleeping: the sleep_ms function uses waitable timers to attain slightly better resolution than sleep at little performance cost. The sleep_us function uses a combination of sleeping and busy waiting to attain the minimal error possible, at the cost of performance, thus it is advisable to use sleep_ms where possible on Windows platforms </p><dl class="section author"><dt>Author</dt><dd>James Horner (<a href="#" onclick="location.href='mai'+'lto:'+'Jam'+'es'+'.Ho'+'rn'+'er@'+'nr'+'c-c'+'nr'+'c.g'+'c.'+'ca'; return false;">James<span class="obfuscator">.nosp@m.</span>.Hor<span class="obfuscator">.nosp@m.</span>ner@n<span class="obfuscator">.nosp@m.</span>rc-c<span class="obfuscator">.nosp@m.</span>nrc.g<span class="obfuscator">.nosp@m.</span>c.ca</a> or <a href="#" onclick="location.href='mai'+'lto:'+'jwe'+'ho'+'rne'+'r@'+'gma'+'il'+'.co'+'m'; return false;">jweho<span class="obfuscator">.nosp@m.</span>rner<span class="obfuscator">.nosp@m.</span>@gmai<span class="obfuscator">.nosp@m.</span>l.co<span class="obfuscator">.nosp@m.</span>m</a>) </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2023-06-13 </dd></dl>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
